# 防抖节流

* 防抖

> 在事件被触发 n 秒后再执行回调，如果在这 n 秒内又被触发，重新计时。

```js
function debounce(fn, delay) {
    let timer = null;
    return () => {
        if (timer) {
            clearTimeout(timer);
            timer = null;
        }
        timer = setTimeout(() => fn(), delay);
    }
}
```



* 节流

> 单位时间内，只有一次触发事件的回调可执行，如果同一单位时间内触发 n 次，只能有一次生效。

```js
function throttle(fn, delay, atleast) {
    let timer = null, previous = null;
    return function() {
        let now = Date.now();
        if (!previous)
            previous = now;
        if (now - previous > atleast) {
            fn();
            // 重置上一次开始的时间
            previous = now;
        } else {
            timer && clearTimeout(timer);
            timer = setTimeout(() => fn, delay);
        }
    }
}
```



防抖的本质是将多次执行变为最后一次执行，节流的本质是将多次执行变成每隔一段时间执行。


